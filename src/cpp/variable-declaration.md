# Variable Declaration

### 2016-03-08 Tue

- 変数を宣言する位置について。
- C++ 言語および C 言語について考える。
- C++ 言語では、変数を宣言する位置は自由である。C 言語は、標準 C89 などではブロック冒頭でしか宣言できなかったが、C99 以降では自由である。
- つまり、int i; for (i = 0; i < length; ++i); とするか、for (int i = 0; i < length; ++i) とするかというような話題である。
- C99 に依存するなら、C も C++ も Java も C# も共通に後者の書き方が推奨されるようになったと言える。
- 変数のスコープはなるべく局所化した方が、プログラムの見通しは良くなりバグは減る。
- また、変数のスコープが小さいほど、コンパイラは有効に最適化する。
- ローカル変数のためのメモリは関数の冒頭でスタック領域に確保されるので、宣言の位置はパフォーマンスに影響しない。
- ただし C++ では、型 識別子; という同じ形でクラスのコンストラクタが実行されるので、パフォーマンスは変わる。よって、どんな場合でも最小限のスコープで変数を宣言することはできない。
- ローカル変数のためのメモリは関数の冒頭でスタック領域に確保されているという意味では、古典的なスタイルは直感的で一貫性がある。
